<%= @tracks.collect do |track| %>
  <div id="audio-and-player-<%= track.id %>">
    <audio id="music-<%= track.id %>" class="music" preload="true">
      <source src="<%= track.audio.url %>" type="audio/wav">
      </audio>
    <div id="audioplayer-<%= track.id %>" class="audioplayer">
      <button class="play"></button>
      <div class="timeline">    
        <div class="playhead"></div>
      </div>
    </div>
  </div>
<% end -%>





<!--
    $('#all-tracks').on('DOMNodeInserted', function(e){
    // debugger;
    console.log("Creating new player.");
    currentDiv = $(this).children().last();
    music = currentDiv.find(".music")[0];
    pButton = currentDiv.find(".play")[0];

    var timeline = currentDiv.find('.timeline')[0]; // timeline
    var playhead = currentDiv.find('.playhead')[0]; // playhead
    var timelineWidth = timeline.offsetWidth - playhead.offsetWidth;

    dynamicallyCreateEventListener(music, pButton, timeline, playhead, timelineWidth);

    
  }); -->